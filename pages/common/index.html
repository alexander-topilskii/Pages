<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–ö–∞—Ç–∞–ª–æ–≥: —Ü–µ–Ω–∑—É—Ä–∞, —ç—Ç–∏–∫–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –≤ –Ω–∞—É–∫–µ</title>
    <style>
        :root{
          --bg:#0b0f14; --panel:#0f1620; --card:#111a26; --muted:#93a4b4; --text:#e8eef5; --acc:#6fb1ff; --chip:#213043; --ok:#9be37a; --warn:#ffd66f; --danger:#ff8a8a;
          --radius:14px; --pad:18px; --shadow:0 10px 30px rgba(0,0,0,.35)
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{margin:0; font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; background:linear-gradient(180deg, #08101a, #0b1119 50%, #0a0f16); color:var(--text)}

        header{position:sticky; top:0; z-index:5; backdrop-filter:saturate(1.2) blur(10px); background:linear-gradient(180deg, rgba(8,16,26,.9), rgba(8,16,26,.65)); border-bottom:1px solid #1d2938}
        .wrap{max-width:1100px; margin:0 auto; padding:14px var(--pad)}
        h1{margin:0; font-size:1.35rem; letter-spacing:.2px}
        .sub{color:var(--muted); font-size:.95rem}

        .toolbar{display:grid; gap:10px; grid-template-columns:1fr; padding:12px var(--pad); background:var(--panel); border-bottom:1px solid #1d2938}
        @media (min-width:900px){ .toolbar{grid-template-columns: 1fr auto auto auto} }
        .toolbar .group{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
        .toolbar input[type="search"], select{background:#0b1420; color:var(--text); border:1px solid #1c2a3b; border-radius:10px; padding:10px 12px; outline:none; min-width:220px}
        .toolbar button, .chip{border:1px solid #26405f}
        .toolbar button{background:#102235; color:var(--text); padding:10px 12px; border-radius:10px; cursor:pointer}
        .toolbar button:hover{filter:brightness(1.1)}

        main{max-width:1100px; margin:20px auto; padding:0 var(--pad) 80px}
        .grid{display:grid; gap:14px}
        @media (min-width:800px){ .grid{grid-template-columns:repeat(2,1fr)} }
        @media (min-width:1100px){ .grid{grid-template-columns:repeat(3,1fr)} }

        .card{background:var(--card); border:1px solid #1c2a3b; border-radius:var(--radius); padding:16px; box-shadow:var(--shadow); position:relative; overflow:hidden}
        .type{font-size:.75rem; text-transform:uppercase; letter-spacing:.12em; color:var(--muted)}
        .title{margin:.15rem 0 .2rem; font-weight:650; font-size:1.05rem}
        .meta{font-size:.9rem; color:var(--muted)}
        .desc{margin:.6rem 0; color:#d6e2ee}
        .examples{margin:.6rem 0}
        .examples summary{cursor:pointer; color:var(--acc)}
        ul{margin:.35rem 0 .1rem .95rem}

        .chips{display:flex; gap:6px; flex-wrap:wrap; margin:.4rem 0}
        .chip{display:inline-flex; align-items:center; gap:6px; padding:6px 9px; border-radius:999px; background:var(--chip); color:#bcd2e6; font-size:.82rem}
        .chip .dot{width:7px; height:7px; border-radius:50%}

        .links a{display:inline-block; margin-right:10px; margin-top:6px; color:var(--acc); text-decoration:none}
        .links a:hover{text-decoration:underline}

        .legend{display:flex; flex-wrap:wrap; gap:8px}
        .legend .chip{opacity:.9}

        .stance{position:absolute; top:10px; right:10px; display:flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; font-size:.82rem; border:1px solid #26405f}
        .stance.claim{background:#112a1c; color:#b7f4c5; border-color:#214f33}
        .stance.debunk{background:#2a1411; color:#ffd1c7; border-color:#5a2a20}

        .pop{display:flex; align-items:center; gap:8px; margin-top:.4rem}
        .bar{flex:1; height:8px; background:#0b1420; border:1px solid #1c2a3b; border-radius:999px; overflow:hidden}
        .bar > span{display:block; height:100%; background:linear-gradient(90deg, #6fb1ff, #9be37a)}
        .pop .val{font-size:.8rem; color:var(--muted)}

        footer{max-width:1100px; margin:40px auto; padding:0 var(--pad) 40px; color:var(--muted)}
    </style>
</head>
<body>
<header>
    <div class="wrap">
        <h1 id="siteTitle">–ö–∞—Ç–∞–ª–æ–≥: —Ü–µ–Ω–∑—É—Ä–∞, —ç—Ç–∏–∫–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –≤ –Ω–∞—É–∫–µ</h1>
        <div id="siteDesc" class="sub">–í—Å–µ —Ç–µ–∫—Å—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ JSON –Ω–∏–∂–µ.</div>
    </div>
</header>

<section class="toolbar">
    <div class="group">
        <input id="q" type="search" placeholder="–ü–æ–∏—Å–∫: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, –ø—Ä–∏–º–µ—Ä‚Ä¶" />
        <select id="type">
            <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
            <option value="book">–ö–Ω–∏–≥–∏</option>
            <option value="article">–°—Ç–∞—Ç—å–∏/–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</option>
            <option value="video">–í–∏–¥–µ–æ/—Ñ–∏–ª—å–º—ã</option>
        </select>
        <select id="sort">
            <option value="relevance">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å</option>
            <option value="pop_desc">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
            <option value="year_desc">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
            <option value="year_asc">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
            <option value="title_asc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê‚Üí–Ø)</option>
        </select>
        <button id="reset">–°–±—Ä–æ—Å</button>
    </div>
    <div class="group" id="topicChips"></div>
    <div class="group legend" id="legend"></div>
</section>

<main>
    <div id="results" class="grid" aria-live="polite"></div>
</main>

<footer>
    <div class="wrap" id="footerNote">–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ JSON-–æ–±—ä–µ–∫—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤—ã–Ω–µ—Å–∏—Ç–µ –µ–≥–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª.</div>
</footer>

<!-- –õ–æ–∫–∞–ª—å–Ω—ã–π JSON: –≤—Å–µ —Ç–µ–∫—Å—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–∞–ª–∏—Ç—Ä—ã, –ª–µ–≥–µ–Ω–¥—ã –∏ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
<script id="catalog" type="application/json">
    {
        "site": {
            "title": "–ö–∞—Ç–∞–ª–æ–≥: –¶–µ–Ω–∑—É—Ä–∞, –≠—Ç–∏–∫–∞ –∏ –ü–æ–ª–∏—Ç–∏–∫–∞ –≤ –ù–∞—É–∫–µ",
            "description": "–û–±–∑–æ—Ä –∫–Ω–∏–≥, —Å—Ç–∞—Ç–µ–π –∏ —Ñ–∏–ª—å–º–æ–≤ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–µ–π—Å–æ–≤. –°—Ç–∞–Ω—Å—ã, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å, –ø–∞–ª–∏—Ç—Ä–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º –∏ –ª–µ–≥–µ–Ω–¥–∞ ‚Äî –≤—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ JSON.",
            "footer": "–õ–æ–∫–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è. –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ data.json –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ fetch."
        },
        "palette": {
            "domains": {
                "—ç–∫–æ–ª–æ–≥–∏—è": "#4caf50",
                "–ø–æ–ª–∏—Ç–∏–∫–∞": "#ff9800",
                "–±–∏–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å": "#9c27b0",
                "–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è": "#03a9f4",
                "–º–µ–¥–∏–∞": "#e91e63"
            },
            "stance": {
                "claim": { "label": "–£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ü–µ–Ω–∑—É—Ä—ã", "icon": "üõë" },
                "debunk": { "label": "–°–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è/–æ–ø—Ä–æ–≤–µ—Ä–≥–∞–µ—Ç —Ü–µ–Ω–∑—É—Ä—É", "icon": "üß™" }
            }
        },
        "books": [
            {
                "id": "merchants-of-doubt-2010",
                "type": "book",
                "title": "Merchants of Doubt",
                "year": 2010,
                "authors": ["Naomi Oreskes", "Erik Conway"],
                "summary": "–ö–∞–∫ –Ω–µ–±–æ–ª—å—à–∞—è —Å–µ—Ç—å —É—á—ë–Ω—ã—Ö –∏ –ø–æ–ª–∏—Ç–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–æ–≤ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏—è–º–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∞ —Å–æ–º–Ω–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ –≤ –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏ —ç–∫–æ–ª–æ–≥–∏–∏.",
                "examples": [
                    { "topic": "–∫—É—Ä–µ–Ω–∏–µ", "text": "–§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–∞—á–Ω–æ–π –∏–Ω–¥—É—Å—Ç—Ä–∏–µ–π ‚Äò–∫–æ–Ω—Ç—Ä-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π‚Äô –∏ PR-–∫–∞–º–ø–∞–Ω–∏–π, —Å—Ç–∞–≤—è—â–∏—Ö –ø–æ–¥ —Å–æ–º–Ω–µ–Ω–∏–µ —Å–≤—è–∑—å —Å —Ä–∞–∫–æ–º." },
                    { "topic": "–æ–∑–æ–Ω", "text": "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è –æ–∑–æ–Ω–∞ –•–§–£: —Å–æ–º–Ω–µ–Ω–∏–µ –≤ –∏–∑–º–µ—Ä–µ–Ω–∏—è—Ö, –ø–µ—Ä–µ–Ω–æ—Å —Ñ–æ–∫—É—Å–∞ –Ω–∞ ‚Äò—Å—Ç–æ–∏–º–æ—Å—Ç—å‚Äô —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è." },
                    { "topic": "–∫–∏—Å–ª–æ—Ç–Ω—ã–µ –¥–æ–∂–¥–∏", "text": "–°–ø–æ–Ω—Å–∏—Ä—É–µ–º—ã–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—é—â–∏–µ –≤–∫–ª–∞–¥ SO‚ÇÇ/NOx; –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —É—â–µ—Ä–±–∞ ‚Äò–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é‚Äô." },
                    { "topic": "–∫–ª–∏–º–∞—Ç", "text": "–†–∏—Ç–æ—Ä–∏–∫–∞ ‚Äò–Ω–∞—É–∫–∞ –Ω–µ –¥–æ–∫–∞–∑–∞–Ω–∞‚Äô, cherry-picking, –º–µ–¥–∏–π–Ω—ã–π ‚Äò–ª–æ–∂–Ω—ã–π –±–∞–ª–∞–Ω—Å‚Äô 50/50." }
                ],
                "topics": ["—ç–∫–æ–ª–æ–≥–∏—è", "–º–µ–¥–∏–∞", "–∫–ª–∏–º–∞—Ç", "–∫—É—Ä–µ–Ω–∏–µ", "–æ–∑–æ–Ω", "–∫–∏—Å–ª–æ—Ç–Ω—ã–µ –¥–æ–∂–¥–∏"],
                "links": [
                    { "label": "Wikipedia", "url": "https://en.wikipedia.org/wiki/Merchants_of_Doubt" }
                ],
                "recommended_for": ["–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏", "—Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞", "–Ω–∞—É–∫–∞ –∏ –º–µ–¥–∏–∞"],
                "popularity": 92,
                "stance": "claim",
                "counter_ids": ["critiques-merchants-2011"]
            },
            {
                "id": "bending-science-2008",
                "type": "book",
                "title": "Bending Science",
                "year": 2008,
                "authors": ["Thomas O. McGarity", "Wendy Wagner"],
                "summary": "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –∏ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏—Å–∫–∞–∂–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö –∑–∞–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —Å—Ç–∞–¥–∏—è—Ö ‚Äî –æ—Ç –≤–æ–ø—Ä–æ—Å–∞ –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.",
                "examples": [
                    { "topic": "—Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç–∏–∫–∞", "text": "–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π; –¥–æ–≥–æ–≤–æ—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤." },
                    { "topic": "—ç–∫–æ–ª–æ–≥–∏—è", "text": "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∑–∞–Ω–∏–∂–∞—é—Ç —Ä–∏—Å–∫–∏ —Ç–æ–∫—Å–∏–∫–∞–Ω—Ç–æ–≤; –ª–æ–±–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤." }
                ],
                "topics": ["–ø–æ–ª–∏—Ç–∏–∫–∞", "—ç–∫–æ–ª–æ–≥–∏—è", "–ø—Ä–∞–≤–æ"],
                "links": [],
                "recommended_for": ["—Ä–µ–≥—É–ª—è—Ü–∏–∏ –∏ –ø—Ä–∞–≤–æ", "–æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤"],
                "popularity": 78,
                "stance": "claim",
                "counter_ids": []
            }
        ],
        "articles": [
            {
                "id": "prosocial-censorship-2023",
                "type": "article",
                "title": "Prosocial motives underlie scientific censorship by scientists",
                "year": 2023,
                "authors": ["Graso et al."],
                "summary": "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —É—á—ë–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏–∑ ‚Äò–ø—Ä–æ-—Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö‚Äô –º–æ—Ç–∏–≤–æ–≤.",
                "examples": [
                    { "topic": "—Ä–µ–¥–∞–∫—Ü–∏–∏", "text": "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–∫–∞–∑–∞ –≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚Äò—Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã—Ö‚Äô –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ç–æ–¥–∏–∫–∏." }
                ],
                "topics": ["–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è", "—ç—Ç–∏–∫–∞"],
                "links": [ { "label": "PMC", "url": "https://pmc.ncbi.nlm.nih.gov/articles/PMC10691350/" } ],
                "recommended_for": ["–º–µ—Ö–∞–Ω–∏–∑–º—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ü–µ–Ω–∑—É—Ä—ã"],
                "popularity": 65,
                "stance": "claim",
                "counter_ids": ["commentary-prosocial-2024"]
            },
            {
                "id": "publication-bias-2016",
                "type": "article",
                "title": "Publication bias and the canonization of false facts",
                "year": 2016,
                "authors": ["Nissen", "others"],
                "summary": "–ö–∞–∫ —Å–µ–ª–µ–∫—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç –ª–æ–∂–Ω—ã–µ ‚Äò—Ñ–∞–∫—Ç—ã‚Äô –≤ –∫–∞–Ω–æ–Ω–µ.",
                "examples": [
                    { "topic": "—Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", "text": "–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —á–∞—â–µ, ‚Äò–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ‚Äô –∏—Å—á–µ–∑–∞—é—Ç." }
                ],
                "topics": ["–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è"],
                "links": [ { "label": "arXiv", "url": "https://arxiv.org/abs/1609.00494" } ],
                "recommended_for": ["—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –∫—Ä–∏–∑–∏—Å"],
                "popularity": 71,
                "stance": "claim",
                "counter_ids": []
            },
            {
                "id": "critiques-merchants-2011",
                "type": "article",
                "title": "Critiques of 'Merchants of Doubt'",
                "year": 2011,
                "authors": ["–†–∞–∑–Ω—ã–µ –∞–≤—Ç–æ—Ä—ã"],
                "summary": "–ü–æ–¥–±–æ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: –æ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏—á–∏–Ω –∏ –Ω–µ–¥–æ–æ—Ü–µ–Ω–∫–µ –∏–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤.",
                "examples": [ { "topic": "–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è", "text": "–ê—Ä–≥—É–º–µ–Ω—Ç—ã –æ —Ç–æ–º, —á—Ç–æ —Ä–æ–ª—å –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—á—ë–Ω—ã—Ö –ø–µ—Ä–µ–æ—Ü–µ–Ω–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –º–µ–¥–∏–∞-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã." } ],
                "topics": ["–º–µ–¥–∏–∞", "–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è"],
                "links": [],
                "recommended_for": ["–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏"],
                "popularity": 40,
                "stance": "debunk",
                "counter_ids": ["merchants-of-doubt-2010"]
            }
        ],
        "videos": [
            {
                "id": "merchants-doc-2014",
                "type": "video",
                "title": "Merchants of Doubt (–¥–æ–∫—Ñ–∏–ª—å–º)",
                "year": 2014,
                "authors": ["Robert Kenner"],
                "summary": "–≠–∫—Ä–∞–Ω–∏–∑–∞—Ü–∏—è –∫–Ω–∏–≥–∏ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö —Å–æ–º–Ω–µ–Ω–∏—è –∏ –º–µ–¥–∏–π–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.",
                "examples": [ { "topic": "–º–µ–¥–∏–∞", "text": "–¢–µ–ª–µ–¥–µ–±–∞—Ç—ã —Å ‚Äò–ª–æ–∂–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º‚Äô: 50/50 —ç—Ñ–∏—Ä –∫–æ–Ω—Å–µ–Ω—Å—É—Å—É –∏ –º–∞—Ä–≥–∏–Ω–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏." } ],
                "topics": ["–º–µ–¥–∏–∞", "—ç–∫–æ–ª–æ–≥–∏—è"],
                "links": [ { "label": "IMDb", "url": "https://www.imdb.com/title/tt3675568/" } ],
                "recommended_for": ["–≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ"],
                "popularity": 58,
                "stance": "claim",
                "counter_ids": []
            }
        ]
    }
</script>

<script>
    // --- Helpers ---
    const $ = sel => document.querySelector(sel);
    const el = (tag, cls) => { const n=document.createElement(tag); if(cls) n.className=cls; return n; };
    const norm = s => (s||"").toString().toLowerCase();
    const allItems = d => [ ...(d.books||[]), ...(d.articles||[]), ...(d.videos||[]) ];

    // Load local JSON embedded in the page
    let DATA = JSON.parse(document.getElementById('catalog').textContent);

    // Fill site texts from JSON
    $('#siteTitle').textContent = DATA.site?.title || $('#siteTitle').textContent;
    $('#siteDesc').textContent  = DATA.site?.description || $('#siteDesc').textContent;
    $('#footerNote').textContent= DATA.site?.footer || $('#footerNote').textContent;

    // Build domain legend from palette
    function renderLegend(){
      const wrap = $('#legend');
      wrap.innerHTML = '';
      const dom = DATA.palette?.domains || {};
      Object.entries(dom).forEach(([k,color])=>{
        const chip = el('span','chip');
        chip.innerHTML = `<span class="dot" style="background:${color}"></span>${k}`;
        wrap.appendChild(chip);
      });
    }

    function collectTopics(items){
      const t = new Set();
      items.forEach(x => (x.topics||[]).forEach(t.add, t));
      return Array.from(t).sort((a,b)=>a.localeCompare(b,'ru'));
    }

    function renderTopicChips(items){
      const wrap = $("#topicChips");
      wrap.innerHTML = "<span class=type>–¢–µ–º—ã:</span>";
      collectTopics(items).forEach(topic=>{
        const c = el('button','chip');
        c.type='button';
        const color = DATA.palette?.domains?.[topic];
        c.innerHTML = `<span class=dot style="background:${color||'#6fb1ff'}"></span>${topic}`;
        c.onclick = ()=>{ c.classList.toggle('active'); update(); };
        wrap.appendChild(c);
      });
      if(!wrap.children.length){ wrap.textContent = "–¢–µ–º—ã –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö"; }
    }

    function stanceBadge(item){
      const st = (DATA.palette?.stance||{});
      const meta = st[item.stance] || {label:'', icon:''};
      const b = el('div','stance ' + (item.stance||''));
      b.textContent = `${meta.icon||''} ${meta.label||''}`.trim();
      return b;
    }

    function popBar(val){
      const box = el('div','pop');
      const bar = el('div','bar');
      const fill = el('span'); fill.style.width = Math.max(0, Math.min(100, +val||0)) + '%';
      bar.appendChild(fill);
      const v = el('span','val'); v.textContent = `–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å: ${val ?? 0}`;
      box.appendChild(bar); box.appendChild(v);
      return box;
    }

    function domainChips(item){
      const chips = el('div','chips');
      (item.topics||[]).forEach(t=>{
        const ch=el('span','chip');
        const color = DATA.palette?.domains?.[t];
        ch.innerHTML=`<span class="dot" style="background:${color||'#6fb1ff'}"></span>${t}`;
        chips.appendChild(ch);
      });
      return chips;
    }

    function counterLinks(item){
      if(!item.counter_ids || !item.counter_ids.length) return null;
      const wrap = el('div','links');
      const label = el('span','meta'); label.textContent = '–ö–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç—ã: ';
      wrap.appendChild(label);
      item.counter_ids.forEach(id=>{
        const found = allItems(DATA).find(x=>x.id===id);
        if(found){
          const a = el('a'); a.href = `#${found.id}`; a.textContent = found.title; a.addEventListener('click', e=>{ e.preventDefault(); const t = document.getElementById(found.id); if(t){ t.scrollIntoView({behavior:'smooth', block:'center'}); t.animate([{outline:'2px solid #6fb1ff'},{outline:'none'}],{duration:1200}); }});
          wrap.appendChild(a);
        }
      });
      return wrap;
    }

    function card(item){
      const c = el('article','card'); c.id = item.id;
      c.appendChild(stanceBadge(item));
      c.innerHTML += `
        <div class="type">${ item.type === 'book' ? '–ö–Ω–∏–≥–∞' : item.type === 'article' ? '–°—Ç–∞—Ç—å—è/–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ' : '–í–∏–¥–µ–æ/—Ñ–∏–ª—å–º' }</div>
        <div class="title">${item.title}</div>
        <div class="meta">${ (item.authors||[]).join(', ') } ${ item.year? ' ‚Ä¢ '+item.year: ''}</div>
        <div class="desc">${ item.summary || ''}</div>
      `;
      c.appendChild(popBar(item.popularity));
      if(item.examples && item.examples.length){
        const det = el('details','examples');
        const sum = el('summary'); sum.textContent = '–ü—Ä–∏–º–µ—Ä—ã –∏ –∫–µ–π—Å—ã';
        const ul = el('ul');
        item.examples.forEach(e=>{ const li=el('li'); li.innerHTML = `<strong>${e.topic}:</strong> ${e.text}`; ul.appendChild(li); });
        det.appendChild(sum); det.appendChild(ul); c.appendChild(det);
      }
      c.appendChild(domainChips(item));
      if(item.links && item.links.length){
        const links = el('div','links');
        item.links.forEach(l=>{ const a=el('a'); a.href=l.url; a.target='_blank'; a.rel='noopener noreferrer'; a.textContent=l.label||'–°—Å—ã–ª–∫–∞'; links.appendChild(a); });
        c.appendChild(links);
      }
      const counters = counterLinks(item); if(counters) c.appendChild(counters);
      if(item.recommended_for && item.recommended_for.length){
        const rec = el('div','meta');
        rec.innerHTML = `–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è: ${item.recommended_for.join(', ')}`;
        c.appendChild(rec);
      }
      return c;
    }

    function score(item, q){
      if(!q) return 0;
      const hay = [item.title, (item.authors||[]).join(' '), item.summary, ...(item.examples||[]).map(e=>e.text)].map(norm).join(' \n ');
      const terms = norm(q).split(/\s+/).filter(Boolean);
      let s = 0; terms.forEach(t=>{ if(hay.includes(t)) s += 1; });
      return -s; // –¥–ª—è sort: –º–µ–Ω—å—à–µ –ª—É—á—à–µ
    }

    function getActiveTopics(){
      return Array.from(document.querySelectorAll('#topicChips .chip.active')).map(b=>b.textContent.trim());
    }

    function update(){
      const q = $('#q').value.trim();
      const type = $('#type').value;
      const sort = $('#sort').value;

      let items = allItems(DATA);
      if(type !== 'all') items = items.filter(x=>x.type===type);
      const activeTopics = new Set(getActiveTopics());
      if(activeTopics.size){
        items = items.filter(x => (x.topics||[]).some(t=>activeTopics.has(t)));
      }
      if(q){
        const qn = norm(q);
        items = items.filter(x=>{
          const hay = [x.title, (x.authors||[]).join(' '), x.summary, ...(x.examples||[]).map(e=>`${e.topic} ${e.text}`)].join(' \n ').toLowerCase();
          return qn.split(/\s+/).every(t=>hay.includes(t));
        });
      }
      if(sort==='year_desc') items.sort((a,b)=>(b.year||0)-(a.year||0));
      else if(sort==='year_asc') items.sort((a,b)=>(a.year||0)-(b.year||0));
      else if(sort==='title_asc') items.sort((a,b)=>a.title.localeCompare(b.title,'ru'));
      else if(sort==='pop_desc') items.sort((a,b)=>(b.popularity||0)-(a.popularity||0));
      else if(sort==='relevance') items.sort((a,b)=> score(a,q)-score(b,q));

      const root = $('#results');
      root.innerHTML = '';
      if(!items.length){
        const empty = el('div','meta'); empty.textContent = '–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ò–∑–º–µ–Ω–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã.'; root.appendChild(empty); return;
      }
      items.forEach(i=> root.appendChild(card(i)));
    }

    // Init
    renderLegend();
    renderTopicChips(allItems(DATA));
    update();

    document.getElementById('reset').addEventListener('click', ()=>{
      $('#q').value=''; $('#type').value='all'; $('#sort').value='relevance';
      document.querySelectorAll('#topicChips .chip.active').forEach(b=>b.classList.remove('active'));
      update();
    });

    ['q','type','sort'].forEach(id=> document.getElementById(id).addEventListener('input', update));
</script>
</body>
</html>
